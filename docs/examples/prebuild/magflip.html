<!DOCTYPE html>
<html>
<head>
    <title>Magzog</title>
    <style>
      #bookShelf .book, 
      #bookShelf .book-holder, 
      #bookShelf .book-on-shelf {
        height: 200px !important;
        width: 200px !important;
      }
    </style>
      <script src="https://cdn.jsdelivr.net/npm/@magflip/minjs@0.5.48/magflip.min.js"></script> 
      <!-- Use for local test -->
      <!-- <script src="../../../packages/minjs/magflip.min.js"></script>  -->
    <script>
    <!--
    var shelfManager;
    var bookViewer;
    document.addEventListener('DOMContentLoaded', function () {
      const pages = [
        {
            id: "page0",
            index: 0,
            image: './resources/book1/page0.jpg'
        },
        {
            id: "page1",
            index: 1,
            image: './resources/book1/page1.jpg'
        },
        {
            id: "page2",
            index: 2,
            image: './resources/book1/page2.jpg'
        },
        {
            id: "page3",
            index: 3,
            image: './resources/book1/page3.jpg'
        },
        {
            id: "page4",
            index: 4,
            image: './resources/book1/page4.jpg'
        },
        {
            id: "page5",
            index: 5,
            image: './resources/book1/page5.jpg'
        },
      ];

      const book = new Book({ 
        id: 'mybook1', 
        lastPageIndex: 5,
        thumbnails: {
          spine: pages[0].image,
          small: pages[0].image,
          medium: pages[0].image,
          cover: {
            front: pages[0].image,
            back: pages[0].image,
          }
        }
      })
      book.importPages(pages, { width: 700, height: 700 });
      // Import Book
      shelfManager = new BookShelfManager();
      bookViewer = shelfManager.getBookViewer();
      shelfManager.importBookToShelf(book);
      shelfManager.importBookToShelf(getSampleBook(2, 10));
      shelfManager.importBookToShelf(getSampleBook(3, 16));

      const view = new FlipView();
      bookViewer.registerView(new FlipView());
      bookViewer.setCurView(view.id)
      // bookManager.loadAndAddBooks();

      // Optional
      window.shelfManager = shelfManager;
      window.bookViewer = bookViewer;
      addZoomRange(bookViewer);
    });

    window.onload = function () {
      console.log('All resources including images are loaded');
    };

    function addZoomRange(bookViewer){
      const viewerEl = bookViewer.element;
      const input = document.createElement('input');
      input.type = 'range';
      input.id = 'zoomRange';
      input.min = '0.5';
      input.max = '2';
      input.value = '1';
      input.step = '0.01';
      viewerEl.appendChild(input);
      input.addEventListener('input', (event) => {
        bookViewer.setZoomLevel(Number(input.value));
      });
    }

    function getSampleBook(bookNum, pageCnt){
      const pages = [];
      for(let i=0;i<pageCnt;i++){
        pages.push({
          id: "page"+i,
          index: i,
          image: `./resources/book${bookNum}/page${i}.jpg`
        })
      }
      const book = new Book({ 
        id: 'mybook' + bookNum, 
        lastPageIndex: pageCnt-1,
        thumbnails: {
          spine: pages[0].image,
          small: pages[0].image,
          medium: pages[0].image,
          cover: {
            front: pages[0].image,
            back: pages[0].image,
          }
        }
      })
      book.importPages(pages, { width: 700, height: 700 });
      return book;
    }
    -->
  </script>

  <style>
    #zoomRange {
      position: absolute;
      top: 10px;
      right: 100px;
    }
  </style>
</head>

<body>
</body>
</html>