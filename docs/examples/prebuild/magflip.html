<!DOCTYPE html>
<html>
<head>
    <title>Magzog</title>
    <style>
      #bookShelf .book, 
      #bookShelf .book-holder, 
      #bookShelf .book-on-shelf {
        height: 200px !important;
        width: 200px !important;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@magflip/minjs@0.5.13/magflip.min.js"></script>
    <script>
    <!--
    var bookManager;
    var bookViewer;
    document.addEventListener('DOMContentLoaded', function () {
      const pages = [
        {
            id: "page0",
            index: 0,
            image: './resources/book1/page0.jpg'
        },
        {
            id: "page1",
            index: 1,
            image: './resources/book1/page1.jpg'
        },
        {
            id: "page2",
            index: 2,
            image: './resources/book1/page2.jpg'
        },
        {
            id: "page3",
            index: 3,
            image: './resources/book1/page3.jpg'
        },
        {
            id: "page4",
            index: 4,
            image: './resources/book1/page4.jpg'
        },
        {
            id: "page5",
            index: 5,
            image: './resources/book1/page5.jpg'
        },
      ];

      const book = new Book({ 
        id: 'mybook1', 
        lastPageIndex: 5,
        thumbnails: {
          spine: pages[0].image,
          small: pages[0].image,
          medium: pages[0].image,
          cover: {
            front: pages[0].image,
            back: pages[0].image,
          }
        }
      })
      book.importPages(pages, { width: 1024, height: 1024 });
      // Import Book
      bookManager = new BookShelfManager();
      bookViewer = bookManager.getBookViewer();
      const view = new FlipView();
      bookViewer.registerView(new FlipView());
      bookViewer.setCurView(view.id)
      // bookManager.loadAndAddBooks();
      bookManager.importBookToShelf(book);
      bookManager.importBookToShelf(getSampleBook(2, 10));
      bookManager.importBookToShelf(getSampleBook(3, 16));

      window.bookManager = bookManager;
      window.bookViewer = bookViewer;
    });

    window.onload = function () {
      console.log('All resources including images are loaded');
    };

    function getSampleBook(bookNum, pageCnt){
      const pages = [];
      for(let i=0;i<pageCnt;i++){
        pages.push({
          id: "page"+i,
          index: i,
          image: `./resources/book${bookNum}/page${i}.jpg`
        })
      }
      const book = new Book({ 
        id: 'mybook' + bookNum, 
        lastPageIndex: pageCnt-1,
        thumbnails: {
          spine: pages[0].image,
          small: pages[0].image,
          medium: pages[0].image,
          cover: {
            front: pages[0].image,
            back: pages[0].image,
          }
        }
      })
      book.importPages(pages, { width: 700, height: 700 });
      return book;
    }
    -->
  </script>
</head>

<body>
</body>
</html>